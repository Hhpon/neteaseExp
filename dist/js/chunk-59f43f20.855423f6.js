(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-59f43f20"],{"002f":function(t,e,n){},"0948":function(t,e,n){var s=n("a051"),r=s.navigator;t.exports=r&&r.userAgent||""},"154a":function(t,e,n){"use strict";var s=n("1d10");function r(t){var e,n;this.promise=new t(function(t,s){if(void 0!==e||void 0!==n)throw TypeError("Bad Promise constructor");e=t,n=s}),this.resolve=s(e),this.reject=s(n)}t.exports.f=function(t){return new r(t)}},"200d":function(t,e,n){"use strict";var s=n("471d"),r=n("836e"),i=n("a051"),a=n("2ba9"),o=n("e1bd");s(s.P+s.R,"Promise",{finally:function(t){var e=a(this,r.Promise||i.Promise),n="function"==typeof t;return this.then(n?function(n){return o(e,t()).then(function(){return n})}:t,n?function(n){return o(e,t()).then(function(){throw n})}:t)}})},2619:function(t,e,n){"use strict";var s=n("471d"),r=n("154a"),i=n("dd02");s(s.S,"Promise",{try:function(t){var e=r.f(this),n=i(t);return(n.e?e.reject:e.resolve)(n.v),e.promise}})},2971:function(t,e,n){var s=n("8232"),r=n("44a7"),i=n("33ef"),a=n("0bc6"),o=n("3202"),c=n("0811"),u={},l={};e=t.exports=function(t,e,n,f,h){var d,v,g,p,m=h?function(){return t}:c(t),y=s(n,f,e?2:1),b=0;if("function"!=typeof m)throw TypeError(t+" is not iterable!");if(i(m)){for(d=o(t.length);d>b;b++)if(p=e?y(a(v=t[b])[0],v[1]):y(t[b]),p===u||p===l)return p}else for(g=m.call(t);!(v=g.next()).done;)if(p=r(g,y,v.value,e),p===u||p===l)return p};e.BREAK=u,e.RETURN=l},"2ba9":function(t,e,n){var s=n("0bc6"),r=n("1d10"),i=n("0902")("species");t.exports=function(t,e){var n,a=s(t).constructor;return void 0===a||void 0==(n=s(a)[i])?e:r(n)}},3365:function(t,e,n){n("10b2"),n("4d6c"),n("98be"),n("60fd"),n("200d"),n("2619"),t.exports=n("836e").Promise},3732:function(t,e,n){var s=n("a051"),r=n("41f6").set,i=s.MutationObserver||s.WebKitMutationObserver,a=s.process,o=s.Promise,c="process"==n("6dd6")(a);t.exports=function(){var t,e,n,u=function(){var s,r;c&&(s=a.domain)&&s.exit();while(t){r=t.fn,t=t.next;try{r()}catch(i){throw t?n():e=void 0,i}}e=void 0,s&&s.enter()};if(c)n=function(){a.nextTick(u)};else if(!i||s.navigator&&s.navigator.standalone)if(o&&o.resolve){var l=o.resolve(void 0);n=function(){l.then(u)}}else n=function(){r.call(s,u)};else{var f=!0,h=document.createTextNode("");new i(u).observe(h,{characterData:!0}),n=function(){h.data=f=!f}}return function(s){var r={fn:s,next:void 0};e&&(e.next=r),t||(t=r,n()),e=r}}},"3f46":function(t,e,n){t.exports=n("3365")},"41f6":function(t,e,n){var s,r,i,a=n("8232"),o=n("412d"),c=n("7608"),u=n("d819"),l=n("a051"),f=l.process,h=l.setImmediate,d=l.clearImmediate,v=l.MessageChannel,g=l.Dispatch,p=0,m={},y="onreadystatechange",b=function(){var t=+this;if(m.hasOwnProperty(t)){var e=m[t];delete m[t],e()}},_=function(t){b.call(t.data)};h&&d||(h=function(t){var e=[],n=1;while(arguments.length>n)e.push(arguments[n++]);return m[++p]=function(){o("function"==typeof t?t:Function(t),e)},s(p),p},d=function(t){delete m[t]},"process"==n("6dd6")(f)?s=function(t){f.nextTick(a(b,t,1))}:g&&g.now?s=function(t){g.now(a(b,t,1))}:v?(r=new v,i=r.port2,r.port1.onmessage=_,s=a(i.postMessage,i,1)):l.addEventListener&&"function"==typeof postMessage&&!l.importScripts?(s=function(t){l.postMessage(t+"","*")},l.addEventListener("message",_,!1)):s=y in u("script")?function(t){c.appendChild(u("script"))[y]=function(){c.removeChild(this),b.call(t)}}:function(t){setTimeout(a(b,t,1),0)}),t.exports={set:h,clear:d}},"44e1":function(t,e,n){"use strict";n.r(e);var s=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("transition",{attrs:{name:"search"}},[n("div",{staticClass:"search-box-wrapper"},[n("search-box",{ref:"searchBox",on:{query:t.query}}),n("div",{directives:[{name:"show",rawName:"v-show",value:!t.newQuery,expression:"!newQuery"}],ref:"shortcut-wrapper",staticClass:"shortcut-wrapper"},[n("cube-scroll",{ref:"scroll",attrs:{data:t.shortCut}},[n("div",{staticClass:"shortcut"},[n("div",{staticClass:"hot-key"},[n("h1",{staticClass:"title"},[t._v("热门搜索")]),n("ul",t._l(t.hotKey,function(e,s){return n("li",{key:s,staticClass:"item",on:{click:function(n){return t.addQuery(e.first)}}},[n("span",[t._v(t._s(e.first))])])}),0)]),n("div",{directives:[{name:"show",rawName:"v-show",value:t.searchHistory.length,expression:"searchHistory.length"}],staticClass:"search-history"},[n("div",{staticClass:"search-title"},[n("h1",{staticClass:"title"},[t._v("搜索历史")]),n("svg",{staticClass:"icon",attrs:{"aria-hidden":"true"},on:{click:t.deleteAll}},[n("use",{attrs:{"xlink:href":"#icon-laji"}})])]),n("div",{staticClass:"search-list"},[n("search-list",{attrs:{searchHistory:t.searchHistory},on:{select:t.addQuery,deleteOne:t.deleteSearchHistory}})],1)])])])],1),n("div",{directives:[{name:"show",rawName:"v-show",value:t.newQuery,expression:"newQuery"}],ref:"suggest-scroll",staticClass:"suggest-scroll"},[n("suggest",{ref:"suggest",attrs:{query:t.newQuery},on:{saveSearch:t.saveSearch,scrollList:t.scrollList}})],1),n("confirm",{ref:"confirm",attrs:{content:"是否清空所有搜索历史",confirmBtnText:"清空"},on:{confirm:t.clearSearchHistory}}),n("router-view")],1)])},r=[],i=n("3f47"),a=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"search-box"},[n("svg",{staticClass:"icon icon-search",attrs:{"aria-hidden":"true"},on:{click:t.back}},[n("use",{attrs:{"xlink:href":"#icon-right"}})]),n("input",{directives:[{name:"model",rawName:"v-model",value:t.query,expression:"query"}],ref:"query",staticClass:"box",attrs:{type:"text",placeholder:t.placeholder},domProps:{value:t.query},on:{input:function(e){e.target.composing||(t.query=e.target.value)}}}),n("svg",{staticClass:"icon icon-dismiss",attrs:{"aria-hidden":"true"},on:{click:t.clear}},[n("use",{attrs:{"xlink:href":"#icon-cha"}})])])},o=[],c=n("8b55"),u={props:{placeholder:{type:String,default:"搜索歌曲、歌手"}},data:function(){return{query:""}},methods:{blur:function(){this.$refs.query.blur()},back:function(){this.$router.back(),this.query=""},clear:function(){this.query=""},setQuery:function(t){this.query=t}},created:function(){var t=this;this.$watch("query",Object(c["a"])(function(e){t.$emit("query",e)},200))}},l=u,f=(n("f710"),n("17cc")),h=Object(f["a"])(l,a,o,!1,null,"f1b0b2ec",null),d=h.exports,v=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"search-list"},[n("ul",t._l(t.searchHistory,function(e,s){return n("li",{key:s,staticClass:"search-warapper",on:{click:function(n){return t.select(e)}}},[n("span",{staticClass:"search-text"},[t._v(t._s(e))]),n("svg",{staticClass:"icon",attrs:{"aria-hidden":"true"},on:{click:function(n){return n.stopPropagation(),t.deleteOne(e)}}},[n("use",{attrs:{"xlink:href":"#icon-cha"}})])])}),0)])},g=[],p={props:{searchHistory:{type:Array,default:function(){return[]}}},methods:{select:function(t){this.$emit("select",t)},deleteOne:function(t){this.$emit("deleteOne",t)}}},m=p,y=(n("95ca"),Object(f["a"])(m,v,g,!1,null,"d09e7c9c",null)),b=y.exports,_=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("cube-scroll",{ref:"suggest",staticClass:"suggest",attrs:{data:t.result,options:t.options,scrollEvents:t.scrollEvents},on:{"pulling-up":t.onPullingUp,"before-scroll-start":t.beforeScroll}},[n("div",{directives:[{name:"show",rawName:"v-show",value:t.result.length||t.searchSuggest.length,expression:"result.length||searchSuggest.length"}],staticClass:"bestMatch"},[t._v("最佳匹配")]),n("ul",{staticClass:"suggest-list"},t._l(t.searchSuggest,function(e,s){return n("li",{key:s,staticClass:"suggest-list-item",on:{click:function(n){return t.selectSuggset(e)}}},[n("img",{staticClass:"suggest-item-img",attrs:{src:e.img1v1Url||e.coverImgUrl}}),n("div",{staticClass:"suggest-item-mes"},[n("span",[t._v(t._s(t.suggestTitle(e)))]),n("span",[t._v(t._s(e.name))])])])}),0),n("ul",{staticClass:"suggest-songs-list"},t._l(t.result,function(e,s){return n("li",{key:s,staticClass:"suggest-songs-item",on:{click:function(n){return t.selectItem(e)}}},[n("div",{staticClass:"name"},[t._v(t._s(e.songName))]),n("div",{staticClass:"singer"},[t._v(t._s(e.singer))])])}),0),n("div",{directives:[{name:"show",rawName:"v-show",value:!t.result.length&&!t.hasMore&&!t.searchSuggest.length,expression:"!result.length&&!hasMore&&!searchSuggest.length"}],staticClass:"no-result-wrapper"},[t._v("抱歉，暂无搜索结果")])])},w=[],x=(n("612f"),n("7f43")),S=n.n(x),C=n("41ea");function j(){return S.a.get("".concat(C["b"],"/search/hot"))}function k(t,e){return S.a.get("".concat(C["b"],"/search?keywords=").concat(t,"&&offset=").concat(e))}function O(t){return S.a.get("".concat(C["b"],"/search/suggest?keywords= ").concat(t))}var $=n("d73f"),P=n("f5de"),U=n("b47c"),E=n("52c1"),q={props:{query:{type:String,default:""}},data:function(){return{offset:0,result:[],options:{pullUpLoad:!0},hasMore:!0,searchSuggest:[],scrollEvents:["before-scroll-start"]}},methods:Object(i["a"])({},Object(E["d"])({setSinger:"SET_SINGER",setDisc:"SET_DISC"}),Object(E["b"])(["insertSong"]),{refresh:function(){this.$refs.suggest.refresh()},selectItem:function(t){var e=this;Object($["a"])(t.alId).then(function(n){t.alPicUrl=n.data.album.picUrl,e.insertSong(t)}),this.$emit("saveSearch")},beforeScroll:function(){this.$emit("scrollList")},selectSuggset:function(t){if("img1v1Url"in t){var e=new U["a"]({id:t.id,name:t.name,img1v1Url:t.img1v1Url});this.$router.push({path:"/search/singer/".concat(e.id)}),this.setSinger(e)}else this.$router.push({path:"/search/disc/".concat(t.id)}),this.setDisc(t);this.$emit("saveSearch")},suggestTitle:function(t){return"img1v1Url"in t?"歌手：":"歌单："},onPullingUp:function(){this.hasMore?this.searchMore():this.$refs.suggest.forceUpdate()},searchMore:function(){var t=this;this.offset++,k(this.query,this.offset).then(function(e){console.log(e.data),console.log(t.offset),e.data.code===C["a"]&&(t.result=t.result.concat(t._normalizeSongs(e.data.result.songs)),t._checkMore(e.data.result))})},_search:function(){var t=this;this.hasMore=!0,this.offset=0,this.$refs.suggest.scrollTo(0,0),this.query&&(k(this.query,this.offset).then(function(e){e.data.code===C["a"]&&(t.result=t._normalizeSongs(e.data.result.songs),t._checkMore(e.data.result))}),this._searchSuggest())},_searchSuggest:function(){var t=this;this.searchSuggest=[],O(this.query).then(function(e){if(e.data.code===C["a"]){var n=e.data.result;"artists"in n&&t.searchSuggest.push(n.artists[0]),"playlists"in n&&t.searchSuggest.push(n.playlists[0])}})},_checkMore:function(t){(!t.songs||30*(this.offset+1)>=t.songCount)&&(this.hasMore=!1)},_normalizeSongs:function(t){console.log(t);var e=[];return t?(t.forEach(function(t){t.id&&t.album.id&&e.push(Object(P["b"])(t))}),e):e}}),watch:{query:function(){this._search()}}},N=q,I=(n("b2ca"),Object(f["a"])(N,_,w,!1,null,"724f08ba",null)),M=I.exports,H=n("1a93"),T=n("510f"),Q={mixins:[T["b"]],components:{SearchBox:d,Suggest:M,SearchList:b,Confirm:H["a"]},data:function(){return{hotKey:[],newQuery:""}},computed:Object(i["a"])({},Object(E["c"])(["searchHistory"]),{shortCut:function(){return this.hotKey.concat(this.searchHistory)}}),created:function(){this._getHotKey()},methods:Object(i["a"])({deleteAll:function(){this.$refs.confirm.show()},handlePlaylist:function(t){var e=t.length>0?"60px":0;this.$refs["shortcut-wrapper"].style.bottom=e,this.$refs.scroll.refresh(),this.$refs["suggest-scroll"].style.bottom=e,this.$refs.suggest.refresh()},saveSearch:function(){this.saveSearchHistory(this.newQuery)},query:function(t){this.newQuery=t},scrollList:function(){this.$refs.searchBox.blur()},_getHotKey:function(){var t=this;j().then(function(e){e.data.code===C["a"]&&(t.hotKey=e.data.result.hots)})},addQuery:function(t){this.$refs.searchBox.setQuery(t)}},Object(E["b"])(["saveSearchHistory","deleteSearchHistory","clearSearchHistory"])),watch:{newQuery:function(t){var e=this;t||setTimeout(function(){e.$refs.scroll.refresh()},20)}}},L=Q,K=(n("9051"),Object(f["a"])(L,s,r,!1,null,"578c1909",null));e["default"]=K.exports},"60fd":function(t,e,n){"use strict";var s,r,i,a,o=n("4df6"),c=n("a051"),u=n("8232"),l=n("419b"),f=n("471d"),h=n("38cc"),d=n("1d10"),v=n("d770e"),g=n("2971"),p=n("2ba9"),m=n("41f6").set,y=n("3732")(),b=n("154a"),_=n("dd02"),w=n("0948"),x=n("e1bd"),S="Promise",C=c.TypeError,j=c.process,k=j&&j.versions,O=k&&k.v8||"",$=c[S],P="process"==l(j),U=function(){},E=r=b.f,q=!!function(){try{var t=$.resolve(1),e=(t.constructor={})[n("0902")("species")]=function(t){t(U,U)};return(P||"function"==typeof PromiseRejectionEvent)&&t.then(U)instanceof e&&0!==O.indexOf("6.6")&&-1===w.indexOf("Chrome/66")}catch(s){}}(),N=function(t){var e;return!(!h(t)||"function"!=typeof(e=t.then))&&e},I=function(t,e){if(!t._n){t._n=!0;var n=t._c;y(function(){var s=t._v,r=1==t._s,i=0,a=function(e){var n,i,a,o=r?e.ok:e.fail,c=e.resolve,u=e.reject,l=e.domain;try{o?(r||(2==t._h&&T(t),t._h=1),!0===o?n=s:(l&&l.enter(),n=o(s),l&&(l.exit(),a=!0)),n===e.promise?u(C("Promise-chain cycle")):(i=N(n))?i.call(n,c,u):c(n)):u(s)}catch(f){l&&!a&&l.exit(),u(f)}};while(n.length>i)a(n[i++]);t._c=[],t._n=!1,e&&!t._h&&M(t)})}},M=function(t){m.call(c,function(){var e,n,s,r=t._v,i=H(t);if(i&&(e=_(function(){P?j.emit("unhandledRejection",r,t):(n=c.onunhandledrejection)?n({promise:t,reason:r}):(s=c.console)&&s.error&&s.error("Unhandled promise rejection",r)}),t._h=P||H(t)?2:1),t._a=void 0,i&&e.e)throw e.v})},H=function(t){return 1!==t._h&&0===(t._a||t._c).length},T=function(t){m.call(c,function(){var e;P?j.emit("rejectionHandled",t):(e=c.onrejectionhandled)&&e({promise:t,reason:t._v})})},Q=function(t){var e=this;e._d||(e._d=!0,e=e._w||e,e._v=t,e._s=2,e._a||(e._a=e._c.slice()),I(e,!0))},L=function(t){var e,n=this;if(!n._d){n._d=!0,n=n._w||n;try{if(n===t)throw C("Promise can't be resolved itself");(e=N(t))?y(function(){var s={_w:n,_d:!1};try{e.call(t,u(L,s,1),u(Q,s,1))}catch(r){Q.call(s,r)}}):(n._v=t,n._s=1,I(n,!1))}catch(s){Q.call({_w:n,_d:!1},s)}}};q||($=function(t){v(this,$,S,"_h"),d(t),s.call(this);try{t(u(L,this,1),u(Q,this,1))}catch(e){Q.call(this,e)}},s=function(t){this._c=[],this._a=void 0,this._s=0,this._d=!1,this._v=void 0,this._h=0,this._n=!1},s.prototype=n("6e32")($.prototype,{then:function(t,e){var n=E(p(this,$));return n.ok="function"!=typeof t||t,n.fail="function"==typeof e&&e,n.domain=P?j.domain:void 0,this._c.push(n),this._a&&this._a.push(n),this._s&&I(this,!1),n.promise},catch:function(t){return this.then(void 0,t)}}),i=function(){var t=new s;this.promise=t,this.resolve=u(L,t,1),this.reject=u(Q,t,1)},b.f=E=function(t){return t===$||t===a?new i(t):r(t)}),f(f.G+f.W+f.F*!q,{Promise:$}),n("3967")($,S),n("f703")(S),a=n("836e")[S],f(f.S+f.F*!q,S,{reject:function(t){var e=E(this),n=e.reject;return n(t),e.promise}}),f(f.S+f.F*(o||!q),S,{resolve:function(t){return x(o&&this===a?$:this,t)}}),f(f.S+f.F*!(q&&n("1969")(function(t){$.all(t)["catch"](U)})),S,{all:function(t){var e=this,n=E(e),s=n.resolve,r=n.reject,i=_(function(){var n=[],i=0,a=1;g(t,!1,function(t){var o=i++,c=!1;n.push(void 0),a++,e.resolve(t).then(function(t){c||(c=!0,n[o]=t,--a||s(n))},r)}),--a||s(n)});return i.e&&r(i.v),n.promise},race:function(t){var e=this,n=E(e),s=n.reject,r=_(function(){g(t,!1,function(t){e.resolve(t).then(n.resolve,s)})});return r.e&&s(r.v),n.promise}})},"68db":function(t,e,n){},"6e32":function(t,e,n){var s=n("3a22");t.exports=function(t,e,n){for(var r in e)n&&t[r]?t[r]=e[r]:s(t,r,e[r]);return t}},9051:function(t,e,n){"use strict";var s=n("d949"),r=n.n(s);r.a},"95ca":function(t,e,n){"use strict";var s=n("68db"),r=n.n(s);r.a},b2ca:function(t,e,n){"use strict";var s=n("002f"),r=n.n(s);r.a},b47c:function(t,e,n){"use strict";n.d(e,"a",function(){return r});var s=n("eb12"),r=function t(e){var n=e.id,r=e.name,i=e.img1v1Url;Object(s["a"])(this,t),this.id=n,this.name=r,this.img1v1Url=i}},d770e:function(t,e){t.exports=function(t,e,n,s){if(!(t instanceof e)||void 0!==s&&s in t)throw TypeError(n+": incorrect invocation!");return t}},d949:function(t,e,n){},dd02:function(t,e){t.exports=function(t){try{return{e:!1,v:t()}}catch(e){return{e:!0,v:e}}}},e1bd:function(t,e,n){var s=n("0bc6"),r=n("38cc"),i=n("154a");t.exports=function(t,e){if(s(t),r(e)&&e.constructor===t)return e;var n=i.f(t),a=n.resolve;return a(e),n.promise}},eb12:function(t,e,n){"use strict";function s(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}n.d(e,"a",function(){return s})},ecfb:function(t,e,n){},f5de:function(t,e,n){"use strict";n("612f");var s=n("3f46"),r=n.n(s),i=n("eb12"),a=n("8506"),o=n.n(a);function c(t,e){for(var n=0;n<e.length;n++){var s=e[n];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),o()(t,s.key,s)}}function u(t,e,n){return e&&c(t.prototype,e),n&&c(t,n),t}var l=n("d73f"),f=n("41ea");n.d(e,"d",function(){return h}),n.d(e,"c",function(){return d}),n.d(e,"a",function(){return v}),n.d(e,"b",function(){return g});var h=function(){function t(e){var n=e.singer,s=e.alId,r=e.alPicUrl,a=e.alName,o=e.alia,c=e.songName,u=e.songId;Object(i["a"])(this,t),this.singer=n,this.alId=s,this.alPicUrl=r,this.alName=a,this.alia=o,this.songName=c,this.songId=u}return u(t,[{key:"getLyric",value:function(){var t=this;return this.lyric?r.a.resolve(this.lyric):new r.a(function(e,n){Object(l["b"])(t.songId).then(function(s){s.data.code===f["a"]?(t.lyric=s.data.lrc.lyric,e(t.lyric)):n("no lyric")})})}}]),t}();function d(t){return new h({singer:p(t.ar),alId:t.al.id,alPicUrl:t.al.picUrl,alName:t.al.name,alia:m(t.alia),songName:t.name,songId:t.privilege.id})}function v(t){return new h({singer:p(t.ar),alId:t.al.id,alPicUrl:t.al.picUrl,alName:t.al.name,alia:m(t.alia),songName:t.name,songId:t.id})}function g(t){return new h({singer:p(t.artists),alId:t.album.id,alPicUrl:t.album.picUrl,alName:t.album.name,alia:m(t.alias),songName:t.name,songId:t.id})}function p(t){var e=[];return t?(t.forEach(function(t){e.push(t.name)}),e.join("/")):""}function m(t){var e=[];return t?(t.forEach(function(t){e.push(t)}),e.join("/")):""}},f703:function(t,e,n){"use strict";var s=n("a051"),r=n("836e"),i=n("4cf4"),a=n("690a"),o=n("0902")("species");t.exports=function(t){var e="function"==typeof r[t]?r[t]:s[t];a&&e&&!e[o]&&i.f(e,o,{configurable:!0,get:function(){return this}})}},f710:function(t,e,n){"use strict";var s=n("ecfb"),r=n.n(s);r.a}}]);
//# sourceMappingURL=chunk-59f43f20.855423f6.js.map